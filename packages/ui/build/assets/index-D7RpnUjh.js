import{P as A,a as i,j as t,D as N,b as T,c as k,B as f,T as y,d as L,A as O,E as G,M as z,a9 as M,X as q,L as F}from"./index-BfWzQ8Ph.js";import{I as J}from"./ItemCard-pahKd4xc.js";import{T as W}from"./tools_empty-CipbKgm6.js";import{u as I,S,D as X,a as E,B as H}from"./useApi-DNUtCWFw.js";import{a as P,A as R}from"./AssistantDialog-BFNexQBe.js";import{C as Y}from"./CredentialInputHandler-Bzf0JwLE.js";import{D as _}from"./Dropdown-CU36pm9t.js";import{G as j}from"./Skeleton-DKrfqZzy.js";import"./TooltipWithParser-GKHocS55.js";import"./useNotifier-DEurOnvN.js";import"./Autocomplete-BBd9zFIQ.js";import"./CredentialListDialog-MT2gTD_L.js";import"./Input-DU8dUV6c.js";const w=({show:m,dialogProps:x,onCancel:a,onAssistantSelected:D})=>{const r=document.getElementById("portal"),o=I(P.getAllAvailableAssistants),[n,u]=i.useState(""),[p,h]=i.useState([]),[c,g]=i.useState("");i.useEffect(()=>()=>{u(""),h([]),g("")},[x]),i.useEffect(()=>{if(o.data&&o.data.length){const e=[];for(let l=0;l<o.data.length;l+=1)e.push({label:o.data[l].name,name:o.data[l].id,description:o.data[l].instructions});h(e)}},[o.data]);const C=m?t.jsxs(N,{fullWidth:!0,maxWidth:"xs",open:m,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[t.jsx(T,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:x.title}),t.jsxs(k,{children:[t.jsxs(f,{sx:{p:2},children:[t.jsx(S,{sx:{position:"relative"},direction:"row",children:t.jsxs(y,{variant:"overline",children:["OpenAI Credential",t.jsx("span",{style:{color:"red"},children:" *"})]})}),t.jsx(Y,{data:n?{credential:n}:{},inputParam:{label:"Connect Credential",name:"credential",type:"credential",credentialNames:["openAIApi"]},onSelect:e=>{u(e),e&&o.request(e)}},n)]}),n&&t.jsxs(f,{sx:{p:2},children:[t.jsx(S,{sx:{position:"relative"},direction:"row",children:t.jsxs(y,{variant:"overline",children:["Assistants",t.jsx("span",{style:{color:"red"},children:" *"})]})}),t.jsx(_,{name:c,options:p,onSelect:e=>g(e),value:c??"choose an option"})]})]}),c&&t.jsx(X,{children:t.jsx(E,{variant:"contained",onClick:()=>D(c,n),children:"Load"})})]}):null;return L.createPortal(C,r)};w.propTypes={show:A.bool,dialogProps:A.object,onCancel:A.func,onAssistantSelected:A.func};const lt=()=>{const m=O(),x=G(s=>s.customization),a=I(P.getAllAssistants),[D,r]=i.useState(!1),[o,n]=i.useState({}),[u,p]=i.useState(!1),[h,c]=i.useState({}),g=()=>{c({title:"Load Existing Assistant"}),p(!0)},C=(s,d)=>{p(!1),e(s,d)},e=(s,d)=>{n({title:"Add New Assistant",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add",selectedOpenAIAssistantId:s,credential:d}),r(!0)},l=s=>{n({title:"Edit Assistant",type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",data:s}),r(!0)},B=()=>{r(!1),a.request()};return i.useEffect(()=>{a.request()},[]),t.jsxs(t.Fragment,{children:[t.jsxs(z,{sx:{background:x.isDarkMode?m.palette.common.black:""},children:[t.jsx(S,{flexDirection:"row",children:t.jsxs(j,{sx:{mb:1.25},container:!0,direction:"row",children:[t.jsx("h1",{children:"OpenAI Assistants"}),t.jsx(f,{sx:{flexGrow:1}}),t.jsxs(j,{item:!0,children:[t.jsx(H,{variant:"outlined",sx:{mr:2},onClick:g,startIcon:t.jsx(M,{}),children:"Load"}),t.jsx(E,{variant:"contained",sx:{color:"white"},onClick:e,startIcon:t.jsx(q,{}),children:"Add"})]})]})}),t.jsx(j,{container:!0,spacing:F,children:!a.loading&&a.data&&a.data.map((s,d)=>{var v,b;return t.jsx(j,{item:!0,lg:3,md:4,sm:6,xs:12,children:t.jsx(J,{data:{name:(v=JSON.parse(s.details))==null?void 0:v.name,description:(b=JSON.parse(s.details))==null?void 0:b.instructions,iconSrc:s.iconSrc},onClick:()=>l(s)})},d)})}),!a.loading&&(!a.data||a.data.length===0)&&t.jsxs(S,{sx:{alignItems:"center",justifyContent:"center"},flexDirection:"column",children:[t.jsx(f,{sx:{p:2,height:"auto"},children:t.jsx("img",{style:{objectFit:"cover",height:"30vh",width:"auto"},src:W,alt:"ToolEmptySVG"})}),t.jsx("div",{children:"No Assistants Added Yet"})]})]}),t.jsx(w,{show:u,dialogProps:h,onCancel:()=>p(!1),onAssistantSelected:C}),t.jsx(R,{show:D,dialogProps:o,onCancel:()=>r(!1),onConfirm:B})]})};export{lt as default};
